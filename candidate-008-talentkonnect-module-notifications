<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <title>TalentKonnect | Notifications</title>
Â  <style>
Â  Â  body {
Â  Â  Â  font-family: 'Segoe UI', sans-serif;
Â  Â  Â  background-color: #F9F9FB;
Â  Â  Â  color: #333;
Â  Â  Â  padding: 20px;
Â  Â  }

Â  Â  .banner {
Â  Â  Â  background-color: #FF6B6B;
Â  Â  Â  color: white;
Â  Â  Â  padding: 14px 16px;
Â  Â  Â  border-radius: 10px;
Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  position: relative;
Â  Â  Â  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
Â  Â  }

Â  Â  .dismiss-btn {
Â  Â  Â  position: absolute;
Â  Â  Â  right: 12px;
Â  Â  Â  top: 8px;
Â  Â  Â  background: none;
Â  Â  Â  border: none;
Â  Â  Â  font-size: 20px;
Â  Â  Â  font-weight: bold;
Â  Â  Â  color: white;
Â  Â  Â  cursor: pointer;
Â  Â  }

Â  Â  .btn {
Â  Â  Â  background-color: #1D3557;
Â  Â  Â  color: white;
Â  Â  Â  padding: 10px 16px;
Â  Â  Â  border: none;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  font-weight: bold;
Â  Â  Â  margin-top: 10px;
Â  Â  }

Â  Â  h2 {
Â  Â  Â  margin-bottom: 12px;
Â  Â  }

Â  Â  .toggle-container {
Â  Â  Â  margin-top: 30px;
Â  Â  }
Â  </style>
</head>
<body>

Â  <h2>Notifications & Reminders</h2>

Â  <!-- Banner Slot -->
Â  <div id="bannerContainer"></div>

Â  <!-- Push Notification Toggle -->
Â  <div class="toggle-container">
Â  Â  <p><strong>Push Alerts:</strong></p>
Â  Â  <button id="toggleBtn" class="btn" onclick="togglePush()">Unsubscribe</button>
Â  </div>

Â  <script>
Â  Â  // ========== Backend Simulation ==========
Â  Â  let pushEnabled = true;

Â  Â  const mockDB = {
Â  Â  Â  notifications: [
Â  Â  Â  Â  { id: 1, message: "ðŸŽ‰ You've earned 20 credits. Join today's draw!", read: false },
Â  Â  Â  Â  { id: 2, message: "â° Reminder: Talent Draw starts in 30 minutes!", read: false }
Â  Â  Â  ],
Â  Â  Â  logs: []
Â  Â  };

Â  Â  function fetchNotifications() {
Â  Â  Â  return new Promise(resolve => {
Â  Â  Â  Â  const pending = mockDB.notifications.filter(n => !n.read);
Â  Â  Â  Â  setTimeout(() => resolve(pending), 300);
Â  Â  Â  });
Â  Â  }

Â  Â  function markAsRead(id) {
Â  Â  Â  return new Promise(resolve => {
Â  Â  Â  Â  const notif = mockDB.notifications.find(n => n.id === id);
Â  Â  Â  Â  if (notif) notif.read = true;
Â  Â  Â  Â  console.log(`âœ… Notification ${id} marked as read`);
Â  Â  Â  Â  resolve({ success: true });
Â  Â  Â  });
Â  Â  }

Â  Â  function logBlocked(reason) {
Â  Â  Â  mockDB.logs.push({
Â  Â  Â  Â  time: new Date().toISOString(),
Â  Â  Â  Â  reason: reason
Â  Â  Â  });
Â  Â  Â  console.warn("ðŸš« Push Blocked:", reason);
Â  Â  }

Â  Â  // ========== UI Logic ==========
Â  Â  async function loadNotifications() {
Â  Â  Â  const notifs = await fetchNotifications();
Â  Â  Â  if (notifs.length > 0) {
Â  Â  Â  Â  showBanner(notifs[0].id, notifs[0].message);
Â  Â  Â  }
Â  Â  }

Â  Â  function showBanner(id, message) {
Â  Â  Â  const container = document.getElementById("bannerContainer");
Â  Â  Â  container.innerHTML = `
Â  Â  Â  Â  <div class="banner" id="notif-${id}">
Â  Â  Â  Â  Â  ${message}
Â  Â  Â  Â  Â  <button class="dismiss-btn" onclick="dismissNotification(${id})">&times;</button>
Â  Â  Â  Â  </div>
Â  Â  Â  `;
Â  Â  }

Â  Â  async function dismissNotification(id) {
Â  Â  Â  await markAsRead(id);
Â  Â  Â  const el = document.getElementById(`notif-${id}`);
Â  Â  Â  if (el) el.remove();
Â  Â  }

Â  Â  function togglePush() {
Â  Â  Â  pushEnabled = !pushEnabled;
Â  Â  Â  const btn = document.getElementById("toggleBtn");
Â  Â  Â  btn.textContent = pushEnabled ? "Unsubscribe" : "Subscribe";

Â  Â  Â  if (!pushEnabled) {
Â  Â  Â  Â  logBlocked("user_blocked");
Â  Â  Â  }
Â  Â  }

Â  Â  window.onload = loadNotifications;
Â  </script>
</body>
</html>
